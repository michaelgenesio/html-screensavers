<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="lib/d3.v3.min.js"></script>
    <script src="lib/topojson.min.js"></script>
    <style>
      body {
        background: #000;
        margin: 0;
        padding: 0;
      }

      .boundary {
        fill: none;
      }
      .country {
        fill: #00CC00;
        stroke: #009900;
        stroke-width: 1px;
      }
    </style>
  </head>
  <body>

    <div id="canvas-svg"></div>

    <script>
      (() => {

        const width = document.documentElement.clientWidth;
        const height = document.documentElement.clientHeight;

        var projection = d3.geo.mercator()
          .scale((width + 1) / 2 / Math.PI)
          .translate([width / 2, height / 2])
          .precision(.1);

        var path = d3.geo.path()
            .projection(projection);

        var graticule = d3.geo.graticule();

        var svg = d3.select("#canvas-svg").append("svg")
            .attr("width", width)
            .attr("height", height);

        svg.append("path")
            .datum(graticule)
            .attr("class", "graticule")
            .attr("d", path);

        svg.append("path")
           .datum(graticule)
           .attr("class", "choropleth")
           .attr("d", path);

        var g = svg.append("g");

        g.append("path")
         .datum({type: "LineString", coordinates: [[-180, 0], [-90, 0], [0, 0], [90, 0], [180, 0]]})
         .attr("class", "equator")
         .attr("d", path);

        d3.json("world-topo-min.json", function(error, world) {
          var countries = topojson.feature(world, world.objects.countries).features;

          var country = g.selectAll(".country").data(countries);

          country.enter().insert("path")
              .attr("class", "country")
              .attr("d", path);


          g.append("path")
              .datum(topojson.mesh(world, world.objects.countries, function(a, b) { return a !== b; }))
              .attr("class", "boundary")
              .attr("d", path);


        });

      })();
    </script>
  </body>
</html>